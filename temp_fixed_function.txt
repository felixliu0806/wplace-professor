  const handlePlaceOverlay = () => {
    if (!pixelArtDataUrl) return;
    
    setIsPlacingOverlay(true);
    
    // 从window对象获取颜色统计信息
    const colorCounts = (window as any).pixelArtColorCounts || {};
    
    // Send message to content script to prepare for overlay placement
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
      const activeTab = tabs[0];
      if (activeTab && activeTab.id) {
        chrome.tabs.sendMessage(
          activeTab.id,
          { 
            action: "prepareForOverlayPlacement",
            pixelArtDataUrl: pixelArtDataUrl,
            colorCounts: colorCounts
          },
          (response) => {
            if (chrome.runtime.lastError) {
              console.error("Error preparing for overlay placement:", chrome.runtime.lastError.message || chrome.runtime.lastError);
              setIsPlacingOverlay(false);
              return;
            }
            
            console.log("Content script is ready for overlay placement");
          }
        );
      }
    });
  };